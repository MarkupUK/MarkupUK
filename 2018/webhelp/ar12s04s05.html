
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Other Complications</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2018 Proceedings" /><link rel="up" href="ar12s04.html" title="Implementation" /><link rel="prev" href="ar12s04s04.html" title="Checking Assertions" /><link rel="next" href="ar12s05.html" title="Results" /><!--  Generated with Oxygen version 20.0-SNAPSHOT, build number 2018032809.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.1.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2018032809" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar12s04s04.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar12s05.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="sect2" id="d5e5272"><div class="titlepage"><div><div><h3 class="title">Other Complications</h3></div></div></div><p>It's worth mentioning a few other complications that the implementation has to deal with, without going
            into gory detail:</p><div xmlns:svg="http://www.w3.org/2000/svg" class="itemizedlist"><ul class="itemizedlist" style=""><li class="listitem"><p>Gregorian types. XSD 1.1 introduces a new facet which allows you to specify that the timezone on a date/time value
                    is mandatory or optional. It turns out to be easy to check this using XPath expressions for an <code class="code">xs:date</code>,
                        <code class="code">xs:time</code>, or <code class="code">xs:dateTime</code>; but there's no easy way to do it for <code class="code">xs:gYear</code>, 
                        <code class="code">xs:gYearMonth</code>, and friends. Similarly, XSD 1.1 allows facets to control the range of these values,
                    for which XPath offers no support. The validator therefore includes a library of functions for handling the
                    Gregorian types.</p></li><li class="listitem"><p>Regular Expressions. The syntax for regular expressions contained in the XSD pattern facet is very similar
                    to the syntax for the XPath <code class="code">fn:matches()</code> function -- but not quite the same. Most of the differences are
                    extensions in the XPath version (for example, support for back-references), and since the schema compilers has done
                    static validation on the expression, we can ignore these differences. The remaining difficulty is the characters "^"
                    and "$", which represent themselves in XSD, but are meta-characters in XPath. To handle this we need to pre-process
                    the regular expression to replace occurrences of "^" and "$"(if not within square brackets) by "\^" and "\$".</p></li><li class="listitem"><p>Equality semantics. The equality matching rules in XSD 1.1, used for example by the enumeration facet or in
                    key/keyref comparison, don't correspond directly to any of the ways of testing equality in XPath. For example, in XPath
                    the integer 3 and the double 3e0 are equal, in XSD they are not. This also makes it difficult to use XPath maps to
                    enforce uniqueness constraints. It is therefore necessary to use a custom function for comparing atomic values, and
                    a function <code class="code">schemaComparable(x)</code> with the property that <code class="code">schemaComparable(x) eq schemaComparable(y)</code>
                    under the XPath rules if and only if <code class="code">x</code> and <code class="code">y</code> are equal under the XSD rules.</p></li></ul></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar12s04s04.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar12s04.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar12s05.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>
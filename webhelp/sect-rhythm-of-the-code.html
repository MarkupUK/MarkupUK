
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The rhythm of the code</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2021 Proceedings" /><link rel="up" href="ar05s03.html" title="What can we do?" /><link rel="prev" href="ar05s03s01.html" title="Convention yourself" /><link rel="next" href="ar05s03s03.html" title="Names, names, names (and declarations)" /><!--  Generated with Oxygen version 23.1, build number 2021022614.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2021022614" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar05s03s01.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar05s03s03.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="sect2" id="sect-rhythm-of-the-code"><div class="titlepage"><div><div><h3 class="title">The rhythm of the code</h3></div></div></div><p>Layout is extremely important for the comprehensibility of the code.
          <code class="code">2+3 * 1+2</code> is <span class="emphasis"><em>not</em></span>
        <code class="code">15</code> (what the spacing suggests) but <code class="code">7</code>. Or what about this coding
        horror:</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;xsl:function</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"local:something"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;…&gt;</strong><strong class="hl-tag" style="color: #000096">&lt;/xsl:function&gt;</strong><strong class="hl-tag" style="color: #000096">&lt;xsl:function</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"local:something-else"</span><strong class="hl-tag" style="color: #000096">&gt;</strong><strong class="hl-tag" style="color: #000096">&lt;…&gt;</strong>  
<strong class="hl-tag" style="color: #000096">&lt;/xsl:function&gt;</strong></pre><p>What are the things we can do to enhance comprehensibility? First a few tips about
        expressions and the likes:</p><div xmlns:svg="http://www.w3.org/2000/svg" class="itemizedlist"><ul class="itemizedlist" style=""><li class="listitem"><p>Use parentheses abundantly. Write <code class="code">(2+3)*(1+2)</code> if that’s what you
            mean. Parentheses help to communicate the intention of your expressions.</p></li><li class="listitem"><p>Choose a style about where to add spaces. Do you write: <code class="code">(2+3)*(1+2)</code> or
              <code class="code">( 2 + 3 ) * ( 1 + 2 )</code>?
            Format a function call like <code class="code">add(1,2)</code> or <code class="code">add(1, 2)</code> or
              <code class="code">add( 1, 2 )</code>… Again, pick something, stick to it.</p></li><li class="listitem"><p>If there’s any syntactic sugar in your language that makes expressions easier
            to read, by all means, use it. For instance, since version 3.0, XPath has the
              <code class="code">=&gt;</code> operator. So instead of:</p><pre class="programlisting" xml:space="preserve">lower-case(normalize-space(translate($name, '\', '/')))</pre><p>We can now write the, IMHO much clearer:</p><pre class="programlisting" xml:space="preserve">$name =&gt; translate('\', '/') =&gt; normalize-space() =&gt; lower-case()</pre></li></ul></div><p>But what is, in my eyes, most important is the code’s “rhythm”.
        When you look at some script or module, can you easily see how it’s structured? Where
        things begin and end? What belongs to what? Here are my tips:</p><div xmlns:svg="http://www.w3.org/2000/svg" class="itemizedlist"><ul class="itemizedlist" style=""><li class="listitem"><p>Choose an indentation style and try to keep this consistent.</p><p>For XML based languages like XSLT that's easy: indenting of XML is already
            (unofficially) standardized. The only thing we can bicker about is <span class="emphasis"><em>how
              many</em></span> to indent and whether to use <span class="emphasis"><em>spaces or tabs</em></span> (I
            personally prefer an indent of two spaces and not to use tabs).</p><p>For text based languages like XQuery it’s a little harder. I’ve done a
            lot of XQuery programming lately and noticed I couldn’t come up with a consistent
            and simple enough indentation strategy that works in all situations. Especially for
            XQuery, make sure that it’s clear what code belongs to what FLWOR expression or
              <code class="code">if/then/else</code> branch. Whatever you choose, it’s always making the
              <span class="emphasis"><em>intention</em></span> of the code clear that matters most.</p></li><li class="listitem"><p>Open some code module in your editor, scroll a bit, and look at it as from afar. Can
            you see how it's structured? What the building blocks are? When you’re looking
            for some template/function/section in the code, can you quickly find it? And in a glance
            see where things start and end? </p><p>Clearly separate the main parts of your code. For instance, an XSLT program consists
            mainly of templates. Make it very clear where one begins and ends. Create a
              <span class="emphasis"><em>sectioned layout</em></span>, like chapters/sections in an article or
            book.</p><p>I personally prefer using “comment lines” for this:</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;xsl:template</strong> <span class="hl-attribute" style="color: #F5844C">…&gt;</span>
<span class="hl-attribute" style="color: #F5844C">…</span>
<span class="hl-attribute" style="color: #F5844C">&lt;/xsl:template&gt;</span>

<span class="hl-attribute" style="color: #F5844C">&lt;!--</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">-</span> <span class="hl-attribute" style="color: #F5844C">--&gt;</span>

<span class="hl-attribute" style="color: #F5844C">&lt;xsl:template</span> <span class="hl-attribute" style="color: #F5844C">…&gt;</span>
<span class="hl-attribute" style="color: #F5844C">…</span>
<span class="hl-attribute" style="color: #F5844C">&lt;/xsl:template&gt;</span></pre><p>And use a “heavier” line in between sets of templates that belong
            together:</p><pre class="programlisting" xml:space="preserve"><em class="hl-comment" style="color: silver">&lt;!-- ======================================================================= --&gt;</em></pre><p>And no, it’s <span class="emphasis"><em>not</em></span> awkward to insert (type) these kinds of
            lines all the time, see <a class="xref" href="sect-debunking.html" title="Debunking some obstacles" shape="rect">the section called “Debunking some obstacles”</a>. But you can also decide to use
            multiple empty lines. Or whatever works for you.</p></li><li class="listitem"><p>Use empty lines and comment headers to give code inside a template/function/… a
            “rhythm”:</p><pre class="programlisting" xml:space="preserve">(: Initialize: :)
…

(: Compute the value for … :)
…

(: Write it to disk: :)
…
</pre><p>Splitting code in blocks like this serves two main purposes, analogue to paragraphs
            in prose:</p><div class="itemizedlist"><ul class="itemizedlist" style=""><li class="listitem"><p>They force you to think more structured and do the things that belong together
                together.</p></li><li class="listitem"><p>Somebody which is new to the code can more easily grasp what it’s about
                (especially when the comment headers are helpful, see <a class="xref" href="sect-comments.html" title="Comments? What comments?" shape="rect">the section called “Comments? What comments?”</a>).</p></li></ul></div><p>The code blocks should’t be very long, max. 10 to 20 lines,
            preferably shorter. Just a single line is ok if it serves the purpose.</p></li><li class="listitem"><p>Use a maximum line width to prevent your lines from overflowing/wrapping and making
            them hard to follow. Older books about software engineering advocate 80 characters.
            Given our modern big screens and the tendency not to print things, I personally prefer
            ~150. </p><p>Using a line width can even flag incomprehensibility issues! When a piece of code
            starts regularly overflowing this, it’s usually a clear indicator the code is too
            complex and you’d better refactor/split it…</p></li></ul></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar05s03s01.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar05s03.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar05s03s03.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>
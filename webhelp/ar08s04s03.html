
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Generating an xml2tex Configuration</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2025 Proceedings" /><link rel="up" href="ar08s04.html" title="Building a PrintCSS renderer" /><link rel="prev" href="ar08s04s02.html" title="Parsing PrintCSS" /><link rel="next" href="ar08s05.html" title="Summary, Discussion and Future Work" /><!--  Generated with Oxygen version 24.0, build number 2022011710.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2022011710" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar08s04s02.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar08s05.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="sect2" id="d5e2386"><div class="titlepage"><div><div><h3 class="title">Generating an xml2tex Configuration</h3></div></div></div><p>How is this information converted to TeX? Our xml2tex library is for us a natural choice for several reasons: it provides a schema-independent grammar for transforming XML into TeX, and it includes built-in libraries for handling formulas and tables, eliminating the need for custom solutions. Moreover, it seamlessly integrates with our <span class="emphasis"><em>xerif</em></span> typesetting system.</p><p>As in CSS, in TeX some formatting information is inserted inline into the text, while others are typically declared in an external style file. For example, there are general formatting rules that specify the layout of the page and other rules that set a portion of text in italics. For this reason, Christine needed to analyze these layers and separate them systematically. Thankfully, xml2tex is able to declare different outputs with one configuration, e.g. a TeX file and a style file.</p><p>So, we decided to generate a xml2tex configuration with XSLT by analyzing XHTML/CSSa and CSS XML. The first part of the generated configuration is the creation of the TeX style file. Paper format, font declarations, font styles, headline elements (h1…h6), etc. are evaluated and the respective TeX macros are created. To align with <span class="emphasis"><em>xerif</em></span> , the TeX style includes many instructions from our CoCoTeX framework. For example, by analyzing the size property of the <code class="code">@page</code> rule above, this TeX snippet is created:</p><p>
        </p><pre class="programlisting" xml:space="preserve">&lt;template context="/html:html/html:head/(html:style|html:link)[1]"&gt;
  &lt;file href="file:///home/cwindeln/printcss2tex/tmp/printcss.sty" encoding="utf-8"&gt;
% (...)
\setlength{\pagewidth}{210mm}
\setlength{\pageheight}{297mm}
% (...)
  &lt;/file&gt;
&lt;/template&gt;</pre><p>
     </p><p>The second part of the configuration is generated by analyzing the CSS declarations and creating xml2tex templates from it. The xml2tex template below is generated from a declaration which sets the font size for <code class="code">&lt;p&gt;</code> elements:</p><pre class="programlisting" xml:space="preserve">&lt;template context="*:p"&gt;
  &lt;text&gt;{\fontsize{11.5pt}&lt;/text&gt;
  &lt;xsl:next-match xmlns:xsl="http://www.w3.org/1999/XSL/Transform"/&gt;
  &lt;text&gt;}&lt;/text&gt;
&lt;/template&gt;</pre><p>During the implementation, Christine noticed that there is no equivalent for the CSS selectors <code class="code">::before</code> and <code class="code">::after</code> in TeX. Therefore, we decided to create placeholder elements before, into which we can later generate the content using xml2tex. The entire transformation is organized into distinct steps, as illustrated below:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem" value="1."><p>Parse the CSS and generate CSS XML and XHTML/CSSa</p></li><li class="listitem" value="2."><p>Insert pseudo elements for content that is inserted with the CSS selectors <code class="code">::before</code> and <code class="code">::after</code>
         </p></li><li class="listitem" value="3."><p>Generate a xml2tex configuration from CSS XML and XHTML/CSSa</p></li><li class="listitem" value="4."><p>Use xml2tex with the generated configuration and apply it on the XHTML/CSSa document to create TeX and the style file.</p></li><li class="listitem" value="5."><p>Render the TeX file with LuaTeX</p></li></ol></div><div class="figure" id="d5e2415"><p class="title"><strong>Figure 1. Figure 1: The transformation of XHTML and CSS to TeX</strong></p><div class="figure-contents"><div class="mediaobject"><img src="papers-2025/12-windeln/images/diagram.svg" alt="Figure 1: The transformation of XHTML and CSS to TeX" /></div></div></div><br class="figure-break" clear="none" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar08s04s02.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar08s04.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar08s05.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>
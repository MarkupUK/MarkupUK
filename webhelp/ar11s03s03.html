
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Export the data from the app's relational database and aggregate it into hierarchical XML records</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2019 Proceedings" /><link rel="up" href="ar11s03.html" title="Different paths to consider" /><link rel="prev" href="ar11s03s02.html" title="Use the app's export/import functionality" /><link rel="next" href="ar11s03s04.html" title="Export the data from the app's relational database, serialize and store it as relational XML records" /><!--  Generated with Oxygen version 21.0, build number 2019032613.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.1.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2019032613" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar11s03s02.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar11s03s04.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="sect2" id="d5e5414"><div class="titlepage"><div><div><h3 class="title">Export the data from the app's relational database and aggregate it into
                hierarchical XML records</h3></div></div></div><p><span class="bold"><strong>Timing - </strong></span>​The archiving scenario: at the point of
                time of an app decommissioning, we could likely still find people in the company who
                know the data. Maybe that knowledge will disappear later on, so doing the
                aggregation as early as possible is an advantage. </p><p><span class="bold"><strong>Complexity -</strong></span>​ It's a low-level approach, so a
                reasonable level of understanding the database schema is necessary. It depends on
                the application, of course. Sometimes it's also possible to work with
                    <span class="emphasis"><em>"aggregation tables"</em></span>,​ which at least partly aggregates the
                data in the relational database, which makes our job easier. </p><div class="example" id="d5e5421"><p class="title"><strong>Example 3. Travel reports:</strong></p><div class="example-contents"><p>In one project, we had to aggregate and archive travel records - similar to
                    the example I used earlier in this paper. It has a header (date, employee...)
                    and transaction items in the body.</p><p>It's quite simple on the database schema level:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Main travel table - one record per trip.</p></li><li class="listitem"><p>Transaction table - one record per transaction.</p></li><li class="listitem"><p>Attachment table - one record with the attachment metadata and a
                            column with content, for ex. PDF, stored as BLOB.</p></li><li class="listitem"><p>Approx. a dozen other tables were <span class="emphasis"><em>"​register
                                tables"</em></span> . For example, based on the employee ID we could
                            look up the employee's name from another table.</p></li></ol></div><p>All in all, we used about 15 tables, and aggregated the records with XQuery
                    that was not so complicated, less than 100 lines and the same patterns were
                    repeating. More about this later.</p></div></div><br class="example-break" clear="none" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar11s03s02.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar11s03.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar11s03s04.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>
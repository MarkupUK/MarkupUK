
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Fleur: an XQuery implementation in Javascript</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2019 Proceedings" /><link rel="up" href="ar05.html" title="XQuery for Data Workers" /><link rel="prev" href="ar05s03s03.html" title="XQuery" /><link rel="next" href="ar05s05.html" title="Development and tests" /><!--  Generated with Oxygen version 21.0, build number 2019032613.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.1.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2019032613" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar05s03s03.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar05s05.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="section" id="d5e2571"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Fleur: an XQuery implementation in Javascript</h2></div></div></div><p>Fleur is an XQuery 3.1+XQuery Update Facility 3.0 implementation. It
    is written in vanilla Javascript allowing it to run, both, in browsers and
    with NodeJS.</p><p>Fleur includes its own DOM3 engine. It can also use browsers DOM for
    manipulating HTML pages, when used in "XQuery-in-the-browser" mode.</p><p>Fleur, primarily, was intended just to replace XSLTForms XPath 1.0
    engine for XForms 2.0 support. It will do much more for XForms: no need
    for XForms 2.0 specific functions to construct nodes and XQuery Update
    Facility as a replacement for XForms actions XML notation.</p><p>Using the native HTTP server provided by NodeJS, Fleur can be used
    to fully develop small XForms-REST-XQuery (XRX) applications.</p><p>Fleur compiles XQuery expressions into a Javascript array of arrays.
    This Javascript array is an exact representation of the corresponding
    XQueryX notation. Compiling expressions is interesting when an expression
    is to be evaluated repeatedly (which is the case, for example, with
    XForms).</p><p>Fleur always evaluates expressions asynchronously (Javascript
    Promises) because it is a requirement for calls to functions such as doc()
    which can be located deeply within the XQueryX tree. It is also necessary
    not to use the single execution thread for too long time: periodically,
    Fleur allows other treatments to get access to the thread. At client side,
    a browser will not freeze and concurrent evaluations will terminate
    independently. At server side, the native HTTP server, for example, will
    start to treat another request when the current one is too time
    consuming.</p><p>It is possible to call any Javascript function in expressions
    prefixing with "js:".</p><p>Internally, Fleur is, by design, always manipulating nodes. Extra
    node types are defined: MAP and ENTRY, ARRAY, SEQUENCE, FUNCTION. Atomic
    values are stored in TEXT nodes with schemaTypeInfo associated.</p><p>Fleur can be launched from command line with usual parameters using
    the node program.</p><pre class="programlisting" xml:space="preserve">C:\Users\Alain Couthures&gt;node fleur --help
Usage: node fleur ([-s:xmlfile] [-o:outfile] (-q:queryfile|-qs:querystring)
                   [params]|[-p:port] [-f:folder])
 -s:     XML input file (optional)
 -o:     output file (optional)
 -q:     query file
 -qs:    query string
 -p:     http server port
 -f:     http server folder
 params  name=value as externals</pre></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar05s03s03.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar05.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar05s05.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>
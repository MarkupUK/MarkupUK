
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Parsing PrintCSS</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2025 Proceedings" /><link rel="up" href="ar08s04.html" title="Building a PrintCSS renderer" /><link rel="prev" href="ar08s04s01.html" title="Preliminary Considerations" /><link rel="next" href="ar08s04s03.html" title="Generating an xml2tex Configuration" /><!--  Generated with Oxygen version 24.0, build number 2022011710.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2022011710" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar08s04s01.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar08s04s03.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="sect2" id="d5e2369"><div class="titlepage"><div><div><h3 class="title">Parsing PrintCSS</h3></div></div></div><p>Christine took on the majority of the work by independently implementing and testing the code, while occasionally consulting with Martin throughout the process. But she did not need to start from scratch. A CSS parser was already part of our transpect framework, but had to be extended for the PrintCSS grammar.</p><p>The CSS parser is based on an EBNF schema. EBNF is the abbreviation of Extended Backus-Naur form and is a declarative syntax to express a syntax (metasyntax) of a formal language. Christine has extended our CSS EBNF schema. For example, here is an EBNF code snippet that declares the syntax for specifying page rules in CSS:</p><pre class="programlisting" xml:space="preserve">pagerule ::= '@page' S* (pageclass | pagename)?          
pagename ::= IDENT
pageclass ::= ':' ('first'|'blank'|'left'|'right')</pre><p>Using Gunther Rademacher's REx Parser Generator <a href="#ftn.fn-7" class="footnote" shape="rect"><sup class="footnote" id="fn-7">[15]</sup></a>, the EBNF was later converted to XSLT. The XSLT is applied on the CSS file and creates an XML document including the CSS rules. The example below shows the XML representation (CSS XML) of a page rule:</p><pre class="programlisting" xml:space="preserve">&lt;atrule origin="/tmp/style.css" type="page"&gt;
  &lt;raw-css xml:space="preserve"&gt;
    @page {&amp;#xD;
      size:A4;&amp;#xD;
      margin: 2cm 2cm 3cm 2cm;&amp;#xD;
    }
  &lt;/raw-css&gt;
  &lt;declaration property="size" value="A4"/&gt;
  &lt;shorthand property="margin" value="2cm 2cm 3cm 2cm" num="2"/&gt;
  &lt;declaration property="margin-top" value="2cm" shorthand="2"/&gt;
  &lt;declaration property="margin-right" value="2cm" shorthand="2"/&gt;
  &lt;declaration property="margin-bottom" value="3cm" shorthand="2"/&gt;
  &lt;declaration property="margin-left" value="2cm" shorthand="2"/&gt;
&lt;/atrule&gt;</pre><p>Later, the CSS rules are applied to the content by evaluating the CSS selectors and inserted back into the source file as CSS attributes (CSSa) <a href="#ftn.fn-8" class="footnote" shape="rect"><sup class="footnote" id="fn-8">[16]</sup></a>:</p><pre class="programlisting" xml:space="preserve">&lt;p&gt;The result of a Delta-DOR measurement provides knowledge 
of the spacecraft’s angular position in the inertial reference frame defined 
by the quasars (CCSDS &lt;a href="#j_astro-2022-0200_ref_002" &gt;2019&lt;/a&gt;).&lt;/p&gt;</pre><p>This CSS parser is encapsulated in a simple XProc step, which takes an XHTML document and an XSLT parser stylesheet as inputs. It produces both the CSS XML representation and an XHTML document with embedded CSS attributes (XHTML/CSSa):</p><pre class="programlisting" xml:space="preserve">&lt;css:expand&gt;
  &lt;p:input port="source" primary="true"/&gt;
  &lt;p:input port="stylesheet"/&gt;
  &lt;p:output port="result" primary="true"/&gt;
  &lt;p:output port="xml-representation"/&gt;
  &lt;p:output port="report" sequence="true"/&gt;
&lt;/css:expand&gt;</pre><div class="footnotes"><br clear="none" /><hr style="width:100; text-align:left;margin-left: 0" /><div id="ftn.fn-7" class="footnote"><p><a href="#fn-7" class="para" shape="rect"><sup class="para">[15] </sup></a>7 Guter Rademacher (2025): REx Parser Generator. Available at <a class="link" href="https://github.com/GuntherRademacher/rex-parser-generator" target="_top" shape="rect">https://github.com/GuntherRademacher/rex-parser-generator</a> (Accessed May 15, 2025)</p></div><div id="ftn.fn-8" class="footnote"><p><a href="#fn-8" class="para" shape="rect"><sup class="para">[16] </sup></a>8 Gerrit Imsieke (2013). Conveying Layout Information with CSSa (Talk held at XML Prague). Available at <a class="link" href="https://archive.xmlprague.cz/2013/presentations/Conveying_Layout_Information_with_CSSa/CSSa_xmlprague_gimsieke.html#/step-1" target="_top" shape="rect">https://archive.xmlprague.cz/2013/presentations/Conveying_Layout_Information_with_CSSa/CSSa_xmlprague_gimsieke.html#/step-1</a> (Accessed May 15, 2025)</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar08s04s01.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar08s04.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar08s04s03.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>

<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Names, names, names (and declarations)</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2021 Proceedings" /><link rel="up" href="ar05s03.html" title="What can we do?" /><link rel="prev" href="sect-rhythm-of-the-code.html" title="The rhythm of the code" /><link rel="next" href="sect-comments.html" title="Comments? What comments?" /><!--  Generated with Oxygen version 23.1, build number 2021022614.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2021022614" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="sect-rhythm-of-the-code.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="sect-comments.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="sect2" id="d5e1888"><div class="titlepage"><div><div><h3 class="title">Names, names, names (and declarations)</h3></div></div></div><p>Choosing the right name for something (variables, functions, templates, etc.) is
        extremely important. A function named <code class="code">computeIt</code> doesn’really communicate
        much meaning. If we decide to call it <code class="code">computeTaxForCustomer</code>, its intent is much
        clearer. Naming matters.</p><p>Here are some comprehensibility measures with regards to naming:</p><div xmlns:svg="http://www.w3.org/2000/svg" class="itemizedlist"><ul class="itemizedlist" style=""><li class="listitem"><p>Don’t be shy of using long and descriptive names. We’re a long way
            from computer languages that forbid names longer than 8 or 16 characters. Most IDEs
            support you by providing pop-up lists of names to choose from if you want to refer to a
            variable, function or template (and even if not we have copy/paste!).</p></li><li class="listitem"><p>Use descriptive names. This is the absolute winner in making code self-documenting.
            For instance:</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;xsl:variable</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"f"</span> <span class="hl-attribute" style="color: #F5844C">as</span>=<span class="hl-value" style="color: #993300">"xs:double"</span> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"($c - 32) * 0.5556"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong></pre><p>It takes a comment to tell the reader that this converts a temperature in Celsius to
            Fahrenheit. But if the variable names were chosen more wisely this is no longer
            necessary:</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;xsl:variable</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"temperature-in-fahrenheit"</span> <span class="hl-attribute" style="color: #F5844C">as</span>=<span class="hl-value" style="color: #993300">"xs:double"</span>
  <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"($temperature-in-celsius - 32) * 0.5556"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong></pre><p>Or even better: break out such an expression in a function:</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;xsl:function</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"mod:celsius-to-fahrenheit"</span> <span class="hl-attribute" style="color: #F5844C">as</span>=<span class="hl-value" style="color: #993300">"xs:double"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;xsl:param</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"temperature-in-celsius"</span> <span class="hl-attribute" style="color: #F5844C">as</span>=<span class="hl-value" style="color: #993300">"xs:double"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;xsl:sequence</strong> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"($temperature-in-celsius - 32) * 0.5556"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/xsl:function&gt;</strong></pre></li><li class="listitem"><p>Break a long and complicated expression into smaller parts using aptly named
            variables. For instance:</p><pre class="programlisting" xml:space="preserve">if (($status eq $status-success) or 
  (($amount ge $amount-limit) and (not($special-account-type)))) 
then …</pre><p>We can make its intent more clear if we rewrite it to:</p><pre class="programlisting" xml:space="preserve">let $successful-attempt as xs:boolean := $status eq $status-success
let $large-withdrawal-permitted as xs:boolean := 
  ($amount ge $amount-limit) and (not($special-account-type))    
return
  if ($successful-attempt or $large-withdrawal-permitted) 
  then …</pre><p>Don’t worry: only in very rare circumstances you have to be concerned about
            the performance impact creating a bunch of additional variables. And probably, the
            compiler will optimize them away for you.</p></li><li class="listitem"><p>If something is in a certain unit (meters, inches, kilograms, dollars, zorkian
            foepies), stick the unit to the name. For an example see the Celsius to Fahrenheit
            conversion above.</p><p>I specifically mention this because of a bug classic: a software mismatch between
            the metric system and the English measurement system caused the NASA Mars Climate
            Orbiter to crash in 1998, at the cost of $125 million (<a class="link" href="https://www.simscale.com/blog/2017/12/nasa-mars-climate-orbiter-metric/" target="_top" shape="rect">https://www.simscale.com/blog/2017/12/nasa-mars-climate-orbiter-metric/</a>).</p></li><li class="listitem"><p>Magic values, numeric and string constants with special meanings, should be given a
            name. Declaring such magic values centralizes their definition, which makes them easier
            to lookup and/or change and prevents bugs caused by mistyping a value. A good name
            clearly communicates the intent of the value.</p><p>Here’s a classic example:</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;xsl:for-each</strong> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"1 to 12"</span><strong class="hl-tag" style="color: #000096">&gt;</strong></pre><p>Why 12? Ah, this is better:</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;xsl:for-each</strong> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"1 to $months-per-year"</span><strong class="hl-tag" style="color: #000096">&gt;</strong></pre><p>It’s not that I expect that the number of months in a year is going to change
            anytime soon. This is about communicating the intent: we’re iterating over months
            here…</p><p class="keep-with-next">Sometimes there is grumbling (me included) about having to
            create long and boring lists of magic name declarations, like this:</p><pre class="programlisting" xml:space="preserve">declare variable $mod:status-error as xs:string := 'error';
declare variable $mod:status-warning as xs:string := 'warning';
…</pre><p>That looks superfluous, until you make a hard to spot “typo”
            bug:</p><pre class="programlisting" xml:space="preserve">if ($status eq 'errror') then …</pre></li><li class="listitem"><p>A convention for building the names is also good. Things like:</p><div class="itemizedlist"><ul class="itemizedlist" style=""><li class="listitem"><p>Which abbreviations can be used (<code class="code">max</code>, <code class="code">min</code>,
                  <code class="code">ptr</code>, etc.)</p></li><li class="listitem"><p>Use something like object-action (<code class="code">file-read</code>,
                  <code class="code">status-get</code>, etc.) or action-object (<code class="code">read-file</code>,
                  <code class="code">get-status</code>, etc.)</p></li><li class="listitem"><p>Special prefixes for booleans (<code class="code">is-…</code>, <code class="code">do-…</code>).</p></li></ul></div></li><li class="listitem"><p>If you declare something, make that declaration<span class="emphasis"><em> as complete as you
              possibly can</em></span>. For a variable or parameter, <span class="emphasis"><em>always</em></span>
            specify it’s type. For a function, always specify the return value’s type.
            Even XSLT named templates can declare a return type (in an <code class="code">as</code> attribute);
            specifying this is unusual but definitely not wrong!</p><p>Always specifying datatypes has double benefits. It tells you more about the
            declaration, increasing its comprehensibility. It will also cause a whole bunch of
            errors to surface sooner if you make mistakes.</p></li></ul></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="sect-rhythm-of-the-code.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar05s03.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="sect-comments.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>

<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Learning iXML</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2025 Proceedings" /><link rel="up" href="ar02.html" title="From iXML to XSpec" /><link rel="prev" href="why-ixml.html" title="Why iXML?" /><link rel="next" href="testing-ixml.html" title="Testing an iXML grammar" /><!--  Generated with Oxygen version 24.0, build number 2022011710.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2022011710" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="why-ixml.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="testing-ixml.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="section" id="learning-ixml"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Learning iXML</h2></div></div></div><p>Steven Pemberton often runs tutorials for learning iXML at markup conferences and, although it wasn’t on the schedule, he very kindly tacked one onto the end of a course I was attending on XForms, during the 2024 <a class="link" href="https://xmlsummerschool.org/" target="_top" shape="rect">XML Summer School</a>, in Oxford.</p><p>If you’re unable to attend one of Steven’s tutorials, Norm Tovey-Walsh has created an online tutorial <a class="link" href="https://www.xml.com/articles/2022/03/28/writing-invisible-xml-grammars/" target="_top" shape="rect"><em class="citetitle">Writing Invisible XML grammars</em></a>. The <em class="citetitle">Invisible XML Specification</em> is published at <a class="link" href="https://invisiblexml.org/1.0/" target="_top" shape="rect">https://invisiblexml.org/1.0/</a> and I recommend paying particular attention to the <em class="citetitle">Complete Grammar</em> section so you’re aware of the pre-defined rules; it’s also a great example of what an iXML grammar looks like and immediately after it is an example of the XML that would be generated if you applied the iXML grammar to itself. The spec is developed and maintained by the <a class="link" href="https://www.w3.org/community/ixml/" target="_top" shape="rect">W3C Invisible Markup Community Group</a>, who have a <a class="link" href="https://lists.w3.org/Archives/Public/public-ixml/" target="_top" shape="rect">email discussion group</a> that anyone can message and a
			public archive that you can search (in case your question has been raised and discussed before). There is a list of grammars on <a class="link" href="https://invisiblexml.org/" target="_top" shape="rect">https://invisiblexml.org/</a> but in general I’ve struggled to find publicly available iXML grammars.</p><p>For my own first attempt at writing an iXML grammar, I chose the DTD document type (DOCTYPE) declaration “string” as the text I wanted to parse. Although DTDs have technically been superseded by more modern schema languages, they’re still fairly commonplace. The DOCTYPE declaration can be used to associate an XML document with an external Document Type Definition (DTD). I chose external because it’s much simpler than internal and the use-cases I had in mind all related to external definitions.</p><p>When working with XML documents, sometimes it’s useful or necessary to know what the exact content model is. In human mode, I can open the document and read the schemas association information; if that’s not there, we’re into a whole other problem that’s out-of-scope for this particular use case. Programmatically, it’s not so easy, as that information is discarded when a DOM object is created.</p><p>Another reason for choosing the DOCTYPE declaration was that the rules for writing one are explicitly defined in the specification for XML[<a class="citation" href="references.html#d5e773" shape="rect"><span class="citation">XML1-0</span></a>] so I wouldn’t have the additional overhead of trying to infer them from sample documents.</p><p>Once I started drafting my iXML grammar, I soon wanted to test it out and “eyeball” what was coming out. We hadn’t been running iXML transformations locally on our laptops during the tutorial (because it was unplanned) so I wasn’t already set up for it. Happily, Google led me to CoffeePot, an Invisible XML processor, developed and maintained by Norm Tovey-Walsh[<a class="citation" href="references.html#d5e778" shape="rect"><span class="citation">CPOT</span></a>]. It’s distributed as a jar file, can easily be run from a command-line and has a useful manual. For a list of alternative implementations, see <a class="link" href="invisblexml.org" target="_top" shape="rect">invisblexml.org</a>.</p><p>Next, I needed a sample input document. This is when I discovered that it wasn’t possible to use iXML itself to find and isolate the DOCTYPE declaration within the XML document; unlike a regular expression, an iXML grammar must match the entirety of the input document. At this point, as I was simply looking for sample input to experiment with, I should have just manually copy and pasted the DOCTYPE declaration string into a file of it’s own. However, I had it stuck in my head that my real-world use-case was to programmatically parse the string and convert it to XML. So I created an ANT macro to load the XML document as text and use a regular expression to find and extract the DOCTYPE declaration. I could have made my regular expression more complex in order to identify the component parts of the DOCTYPE declaration but that would have defeated the point of the learning exercise. Also, one of the advantages of an iXML grammar over a regular expression is readability.
			Understanding even a slightly complex regular expression written by someone else - or by myself a while ago - can be challenging whereas an iXML grammar is commonly expressed as named components so it’s easier to identify the logical “building blocks” and how they relate to each other.</p><div class="figure" id="doctype-declaration-example"><p class="title"><strong>Figure 3. Single-line text file containing a DOCTYPE declaration for XHTML</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td rowspan="1" colspan="1"><img src="papers-2025/02-thomson/images/xhtml_public_path.txt.png" width="100%" alt="Single-line text file containing a DOCTYPE declaration for XHTML" /></td></tr></table></div></div></div><br class="figure-break" clear="none" /><p><a class="link" href="learning-ixml.html#doctype-declaration-example" title="Figure 3. Single-line text file containing a DOCTYPE declaration for XHTML" shape="rect">Figure 3</a> shows an example of a DOCTYPE declaration string after it's been extracted from an XHTML document and saved separately in a text file.</p><p>Now I was ready to test.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="why-ixml.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar02.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="testing-ixml.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>

<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Comments? What comments?</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2021 Proceedings" /><link rel="up" href="ar05s03.html" title="What can we do?" /><link rel="prev" href="ar05s03s03.html" title="Names, names, names (and declarations)" /><link rel="next" href="sect-process.html" title="It’s the process…" /><!--  Generated with Oxygen version 23.1, build number 2021022614.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2021022614" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar05s03s03.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="sect-process.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="sect2" id="sect-comments"><div class="titlepage"><div><div><h3 class="title">Comments? What comments?</h3></div></div></div><p>Probably everyone knows the famous saying “better no comment than a wrong
        one”, or one of its variations. And it’s true: it’s extremely confusing
        reading what a piece of software is supposed do and find out it does something different… Of
        course, it happens to all of us. You wrote something once, including informative comments.
        Then you refactor it, then refactor some more, and in having to deal with all the
        complexities of getting it to work, forget to update the comments.</p><p>Here are some best practices for commenting:</p><div xmlns:svg="http://www.w3.org/2000/svg" class="itemizedlist"><ul class="itemizedlist" style=""><li class="listitem"><p>Make a clear distinction between <span class="emphasis"><em>black-box</em></span> and
              <span class="emphasis"><em>white-box</em></span> comments.</p><div class="itemizedlist"><ul class="itemizedlist" style=""><li class="listitem"><p>Black-box comments are things that should be understandable without having to
                consult the code. For instance module, template and function descriptions. These
                comments must still make sense when they’re sperated from the code, as for
                instance happens with XQuery xqDoc (<a class="link" href="http://xqdoc.org" target="_top" shape="rect">http://xqdoc.org</a>) comments
                (between <code class="code">(:~ … :)</code>) in some environments.</p></li><li class="listitem"><p>White-box comments are <span class="emphasis"><em>about</em></span> the code. These comments
                should help the reader to grasp what’s going on.</p></li></ul></div></li><li class="listitem"><p>Do not comment the obvious, comment the <span class="emphasis"><em>intent</em></span>. This, for
            instance, is completely superfluous:</p><pre class="programlisting" xml:space="preserve"><em class="hl-comment" style="color: silver">&lt;!-- Store the number of &lt;thing&gt; elements in $things-count: --&gt;</em>
<strong class="hl-tag" style="color: #000096">&lt;xsl:variable</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"things-count"</span> <span class="hl-attribute" style="color: #F5844C">as</span>=<span class="hl-value" style="color: #993300">"xs:integer"</span> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"count(//things)"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong></pre><p>Both the (well-chosen) variable name as the expression already tell you this. This
            however tells the reader what the intent of the code is:</p><pre class="programlisting" xml:space="preserve"><em class="hl-comment" style="color: silver">&lt;!-- Add a prompt attribute to every thing for easier reporting later: --&gt;</em>
<strong class="hl-tag" style="color: #000096">&lt;xsl:variable</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"things-count"</span> <span class="hl-attribute" style="color: #F5844C">as</span>=<span class="hl-value" style="color: #993300">"xs:integer"</span> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"count(//things)"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;xsl:for-each</strong> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"//things"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;xsl:copy&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;xsl:attribute</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"prompt"</span> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"position() || '/'|| $things-count"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;xsl:apply-templates</strong> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"@* | node()"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/xsl:copy&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/xsl:for-each&gt;</strong></pre></li><li class="listitem"><p>Use comments (and empty lines) for creating “rhythm”. See <a class="xref" href="sect-rhythm-of-the-code.html" title="The rhythm of the code" shape="rect">the section called “The rhythm of the code”</a>.</p></li><li class="listitem"><p>Use comments as the equivalent of <span class="emphasis"><em>section titles</em></span>, even if what
            the comment says is obvious when you <span class="emphasis"><em>know</em></span> the code. Remember, the
            reader is’t always that knowledgeable.</p><pre class="programlisting" xml:space="preserve">&lt;!-- Initialize: --&gt;
…

&lt;!-- Compute the values for … --&gt;
…
            
&lt;!-- Done, wrap up: --&gt;
…</pre><p>This creates an additional, smaller, rhythm inside the bigger rhythm of templates
            and functions.</p></li><li class="listitem"><p>Some movies on DVD (when we used to have DVDs, old-man’s reminiscences) had
            the option to turn “director’s comments” on. You then heard the
            movie director in a voice-over about certain scenes: how they were taken, why certain
            choices were made, etc. One of the best pieces of advise about commenting I ever had was
            that comments should be exactly like that: like a director telling you about the
            code.</p><div class="itemizedlist"><ul class="itemizedlist" style=""><li class="listitem"><p>Why is this code different from the rest? (bug workaround…)</p></li><li class="listitem"><p>Why this completely incomprehensible expression? (performance…)</p></li><li class="listitem"><p>What you did to make this working? (prevent problems already solved…)</p></li><li class="listitem"><p>What trap not to fall into when maintaining this code? (point out obvious
                mistakes…) </p></li></ul></div><p>Fantasizing about being a famous movie director and providing comments about your
            brilliant artistic choices is a constructive mindset for creating high quality
            comments.</p></li><li class="listitem"><p>Be very careful with blocks of commented-out code. Don’t make the reader
            guess about why you left it in. Forgotten to delete? Laziness? Carelessness? Is this
            still important? Can I delete it now or was there a good reason to keep it? At least
            provide some comment about the why if you really think it still serves a purpose.</p></li></ul></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar05s03s03.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar05s03.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="sect-process.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>
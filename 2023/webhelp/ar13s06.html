
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Ivy abstraction. Introducing artifact types</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2023 Proceedings" /><link rel="up" href="ar13.html" title="A Dependency Management Approach for Document and Data Transformation Projects" /><link rel="prev" href="ar13s05.html" title="Introducing the Arousa project structure" /><link rel="next" href="ar13s07.html" title="A Key difference with Maven" /><!--  Generated with Oxygen version 24.0, build number 2021121511.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2021121511" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar13s05.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar13s07.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="section" id="d5e3792"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Ivy abstraction. Introducing artifact types</h2></div></div></div><p>Ivy is a quite abstract tool, in the sense that is focused on its tasks without getting into irrelevant details. This is probably one of its biggest adoption difficulties, as it lacks specific guidelines on some of its elements. 
    </p><p>For example, what is a dependency type? What should it be used for? How? Is it related to the file extension?
    </p><p>Ivy does not care much about what do you use an artifact type for. As long as something is a type for you, Ivy handles it accordingly. It can be aligned with the file extension or not. We must remark here that Ivy has a specific attribute for the artifact file extensions. That extension attribute take the artifact type value if its not specified explicitly.Ivy does not care much about what do you use an artifact type for. As long as something is a type for you, Ivy handles it accordingly. It can be aligned with the file extension or not. We must remark here that Ivy has a specific attribute for the artifact file extensions. That extension attribute take the artifact type value if its not specified explicitly.
    </p><p>The Arousa template projects package files using zip archives. We use to refer to them as “transformations” because we use it for transformation sources. You are free to refer to it with the name that make more sense for you. The template projects adds the content from the doc folder to the published packages to make some sort of documentation available in the dependent projects. It may be useful for sharing details about some css rules, or maybe how should we call xslts, their names and use cases, etc. 
    </p><p>There may be cases where the documentation contents may need to be handled with different delivery cycles. We are going to use this use case to illustrate artifact types. 
    </p><p>We have added an example (dita-sources example) where we share several dita source sets chained. If you check for example the dita-sources-1 project you may notice a modification of the arousa build where we pack a doc zip explicitly. 
    </p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;target</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"arousa-package-doc"</span>  <span class="hl-attribute" style="color: #F5844C">if</span>=<span class="hl-value" style="color: #993300">"${doc.folder.present}"</span><strong class="hl-tag" style="color: #000096"> &gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;mkdir</strong> <span class="hl-attribute" style="color: #F5844C">dir</span>=<span class="hl-value" style="color: #993300">"temp-doc"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;mkdir</strong> <span class="hl-attribute" style="color: #F5844C">dir</span>=<span class="hl-value" style="color: #993300">"temp-doc/doc"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;mkdir</strong> <span class="hl-attribute" style="color: #F5844C">dir</span>=<span class="hl-value" style="color: #993300">"temp-doc/doc/${arousa.project.name}"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;copy</strong> <span class="hl-attribute" style="color: #F5844C">todir</span>=<span class="hl-value" style="color: #993300">"temp-doc/doc/${arousa.project.name}"</span><strong class="hl-tag" style="color: #000096"> &gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;fileset</strong> <span class="hl-attribute" style="color: #F5844C">dir</span>=<span class="hl-value" style="color: #993300">"doc"</span><strong class="hl-tag" style="color: #000096"> &gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;include</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"**"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong> 
 <strong class="hl-tag" style="color: #000096">&lt;exclude</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"deps/**"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;/fileset&gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;/copy&gt;</strong>
 <em class="hl-comment" style="color: silver">&lt;!-- .......... Creating temporary doc ........... --&gt;</em>
 <strong class="hl-tag" style="color: #000096">&lt;zip</strong> <span class="hl-attribute" style="color: #F5844C">destfile</span>=<span class="hl-value" style="color: #993300">"dist/${arousa.project.name}-doc.zip"</span><strong class="hl-tag" style="color: #000096"> &gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;zipfileset</strong> <span class="hl-attribute" style="color: #F5844C">dir</span>=<span class="hl-value" style="color: #993300">"temp-doc"</span><strong class="hl-tag" style="color: #000096">  &gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;include</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"**"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong> 
 <strong class="hl-tag" style="color: #000096">&lt;/zipfileset&gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;/zip&gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;delete</strong> <span class="hl-attribute" style="color: #F5844C">dir</span>=<span class="hl-value" style="color: #993300">"temp-doc"</span> <span class="hl-attribute" style="color: #F5844C">failonerror</span>=<span class="hl-value" style="color: #993300">"false"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>
 <strong class="hl-tag" style="color: #000096">&lt;/target&gt;</strong></pre><p>We have also added a complementary publication to the conf/arousa-ivy.xml</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;publications&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;artifact</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"dita-sources-1"</span> <span class="hl-attribute" style="color: #F5844C">type</span>=<span class="hl-value" style="color: #993300">"transformations"</span> 
              <span class="hl-attribute" style="color: #F5844C">ext</span>=<span class="hl-value" style="color: #993300">"zip"</span> <span class="hl-attribute" style="color: #F5844C">conf</span>=<span class="hl-value" style="color: #993300">"default"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;artifact</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"dita-sources-1-doc"</span> <span class="hl-attribute" style="color: #F5844C">type</span>=<span class="hl-value" style="color: #993300">"documentation"</span> 
              <span class="hl-attribute" style="color: #F5844C">ext</span>=<span class="hl-value" style="color: #993300">"zip"</span> <span class="hl-attribute" style="color: #F5844C">conf</span>=<span class="hl-value" style="color: #993300">"default"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/publications&gt;</strong></pre><p> We’ve also added the type to the repository pattern in the conf/arousa-ivy-settings.xml. </p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;property</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"demo-arousa-pattern"</span>
	    <span class="hl-attribute" style="color: #F5844C">value</span>=<span class="hl-value" style="color: #993300">"[organisation]/[module]/[type]/[revision]/
                                  [module]-[revision].[ext]"</span>
	    <span class="hl-attribute" style="color: #F5844C">override</span>=<span class="hl-value" style="color: #993300">"true"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong></pre><p> Once the configurations have been adjusted, and some contents have been added to the doc
      folder, you can pack the contents and publish the examples. We are going to use the ant
      targets directly with the following command. </p><p>
      </p><pre class="programlisting" xml:space="preserve">$ ant package dist</pre><p>
    </p><p> At this point you can retrieve and use the contents from a second or third project. Take
      a look at the conf/arousa-ivy.xml second dita-sources project. We have added the dependency
      with only the documentation artifact.</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;dependencies</strong> <span class="hl-attribute" style="color: #F5844C">defaultconf</span>=<span class="hl-value" style="color: #993300">"default"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;dependency</strong> <span class="hl-attribute" style="color: #F5844C">org</span>=<span class="hl-value" style="color: #993300">"org.markupuk.examples.vionta"</span> 
                        <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"dita-sources-1"</span> <span class="hl-attribute" style="color: #F5844C">rev</span>=<span class="hl-value" style="color: #993300">"1.0"</span><strong class="hl-tag" style="color: #000096"> &gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;artifact</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"dita-sources-1-doc"</span> <span class="hl-attribute" style="color: #F5844C">type</span>=<span class="hl-value" style="color: #993300">"documentation"</span> 
                                              <span class="hl-attribute" style="color: #F5844C">ext</span>=<span class="hl-value" style="color: #993300">"zip"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/dependency&gt;</strong>
 ...</pre><p>If you type the following command you should bring the dependency to your project.</p><pre class="programlisting" xml:space="preserve">$ arousa update-dependencies</pre><p>This example shows an interesting point about what can and should we use dependency management for. We can use dependency management for software binaries, code, etc. but we can also describe elements, like content, datasets and shared resources. There are several cases where this approach can be used, like for example the legal clauses that may be added to each contract, proposal, books, etc. in a publishing or in a rfp process. Usually interrelated elements that our process depend on and are shared as resources on a timely basis, both managed by different groups or used in different contexts.
    </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar13s05.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar13.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar13s07.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>

<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Exploring Data</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2023 Proceedings" /><link rel="up" href="ar14.html" title="Tool-Based Transformations" /><link rel="prev" href="phases.html" title="Project steps and phases" /><link rel="next" href="off-the-shelf-or-ad-hoc.html" title="Off-the-shelf tools and ad-hoc tools" /><!--  Generated with Oxygen version 24.0, build number 2021121511.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2021121511" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="phases.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="off-the-shelf-or-ad-hoc.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="section" id="ways-to-explore"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Exploring Data</h2></div></div></div><p>The author has found that having a large number of sample input documents
significantly increases the chance a project will be successful. Thousands of tens of thousands of journal articles, for example, selected across every possible journal and journal publisher involved in a project, will likely mean that almost all likely situations will actually occur, and that differences between schemas or DTDs and actual data will be discovered.</p><p>Having the <span class="emphasis"><em>right</em></span> schemas, DTDs, entity files, and input data, and the <span class="emphasis"><em>right</em></span> documentation is essential.</p><p>If there is sample output, it should be compared to what is generated, so having corresponding input and output is a major help.</p><p>If you are faced with exploring, say, five thousand documents,
    the first thing is to validate them. Clearly you don’t want to lead
  each document by turn into an XML editor and press Validate. But a simple
  XSLT stylesheet might work:</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;xsl:template</strong> <span class="hl-attribute" style="color: #F5844C">match</span>=<span class="hl-value" style="color: #993300">"/"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;xsl:for-each</strong> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"uri-collection('data/*.xml')"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
         <strong class="hl-tag" style="color: #000096">&lt;xsl:try</strong> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"doc(.)"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
           <strong class="hl-tag" style="color: #000096">&lt;xsl:catch&gt;</strong>{.} failed<strong class="hl-tag" style="color: #000096">&lt;/xsl:catch&gt;</strong>
         <strong class="hl-tag" style="color: #000096">&lt;/xsl:try&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;/xsl:for-each&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;/xsl:template&gt;</strong></pre><p>Exact details will vary depending on how the XSLT implementation
  handles collections; an alternative is a simple bash script that writes
  a list of files, and using unparsed-text-lines() to read a URI at a time, instead of using collection(), perhaps like this:</p><pre class="programlisting" xml:space="preserve">ls data &gt; file-list.txt</pre><p>or more, if escaping special characters such as &amp; is needed.</p><p>If validating is too slow, you could use xmllint instead of Saxon on most platforms (you might need to install it). Since modern computers support multiple programs running at the same time independently, you could validate groups of sample files in parallel, again maybe with a script.</p><p>When you write small scripts in this way, make sure to put a
  comment at the start of each to say how to use them, and make a
  Makefile or a runme.sh file that runs them, to make it easy to return to
  this task later.</p><p>Validating files usually involves setting up an XML catalog;
  you might find it helpful to use <span class="command"><strong>strace</strong></span> as a wrapper to see which XML catalog files are being opened.</p><p>If you do this sort of basic exploration often, consider writing a
  simple tool. A half hour spent working on it will more than repay itself
  on the second project, or later in the first one. It could be a simple
  shell script and take options for whether to trace files opened, and in which directory (folder) to look for data files, and which catalog to use.</p><p>This level of scripting is very easy and highly productive.
  Be <span class="emphasis"><em>very</em></span> careful to remember the comments, though:</p><pre class="programlisting" xml:space="preserve"><em class="hl-comment" style="color: silver">#! /bin/sh</em>
  <em class="hl-comment" style="color: silver"># validate all files in the data directory</em>
  <em class="hl-comment" style="color: silver"># options: -trace - turn on catalog file tracing</em>
  TRACE=
  <strong class="hl-keyword">if</strong> <strong class="hl-keyword">test</strong> <strong class="hl-string"><em style="color:red">"$1"</em></strong> = <strong class="hl-string"><em style="color:red">"-trace"</em></strong>
  <strong class="hl-keyword">then</strong>
      TRACE=<strong class="hl-string"><em style="color:red">"strace -e openat,open"</em></strong>
      <strong class="hl-keyword">shift</strong>; <em class="hl-comment" style="color: silver"># delete the -trace option</em>
  <strong class="hl-keyword">fi</strong>
  $TRACE xml-validate <strong class="hl-string"><em style="color:red">"$@"</em></strong></pre><p>There is no need to use 1960s big-business style comments with dates and who wrote what. If necessary, use a git repository, for example on gitlab.com, and store all your scripts there, and git will tell you who added each line and when, if you need to know.</p><p>Writing simple tools like this will increase your confidence and skills. Even if you are an experienced programmer with decades of scripting experience, the exercise will get you into the right head-space for working in the project. Think of it as like doing lunge exercises before a race!</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="phases.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar14.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="off-the-shelf-or-ad-hoc.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>
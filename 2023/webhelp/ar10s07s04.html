
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Check the number of words</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2023 Proceedings" /><link rel="up" href="ar10s07.html" title="Examples of AI-driven Schematron and SQF Solutions" /><link rel="prev" href="ar10s07s03.html" title="Answer to question" /><link rel="next" href="ar10s07s05.html" title="Check if block of text should be a list" /><!--  Generated with Oxygen version 24.0, build number 2021121511.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2021121511" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar10s07s03.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar10s07s05.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="section" id="d5e3224"><div class="titlepage"><div><div><h3 class="title">Check the number of words</h3></div></div></div><p>In this case, we want to create a rule that checks the number of words in the
                description element of an XML document. The rule should ensure that the description
                contains less than 50 words. If the description contains more than 50 words, the
                rule should fail and report an error. The implementation uses XPath functions to
                tokenize the string and count the words. </p><p>
                </p><div class="example" id="d5e3228"><p class="title"><strong>Example 10. Rule that verifies the number of words from the shortdesc element</strong></p><div class="example-contents"><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;sch:rule</strong> <span class="hl-attribute" style="color: #F5844C">context</span>=<span class="hl-value" style="color: #993300">"shortdesc"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;sch:report</strong> <span class="hl-attribute" style="color: #F5844C">test</span>=<span class="hl-value" style="color: #993300">"count(tokenize(.,'\s+')) &gt; 50"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
         The description must contain less than 50 words.<strong class="hl-tag" style="color: #000096">&lt;/sch:report&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/sch:rule&gt;</strong></pre></div></div><p><br class="example-break" clear="none" />
            </p><p>You can also provide a fix for the error by suggesting a corrected version of the
                description that contains less than 50 words. The AI can help you to do this by
                reformulating the phrase.</p><div class="example" id="d5e3232"><p class="title"><strong>Example 11. SQF fix that reformulates the phrase to have less than 50 words</strong></p><div class="example-contents"><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;sqf:fix</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"rephrase"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;sqf:description&gt;</strong>
        <strong class="hl-tag" style="color: #000096">&lt;sqf:title&gt;</strong>Reformulate phrase to contain less than 50 words<strong class="hl-tag" style="color: #000096">&lt;/sqf:title&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;/sqf:description&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;sqf:replace</strong> <span class="hl-attribute" style="color: #F5844C">match</span>=<span class="hl-value" style="color: #993300">"text()"</span> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"ai:transform-content(
           'Reformulate phrase to contain less than 50 words', .)"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/sqf:fix&gt;</strong></pre></div></div><br class="example-break" clear="none" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar10s07s03.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar10s07.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar10s07s05.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>

<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Feature request for XProc: please add &lt;p:validate-with-dtd&gt;</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2023 Proceedings" /><link rel="up" href="ar05s06.html" title="Takeaways" /><link rel="prev" href="ar05s06s05.html" title="XProc pipeline optimisation by loading stylesheets only once at the beginning" /><link rel="next" href="references.html" title="Bibliography" /><!--  Generated with Oxygen version 24.0, build number 2021121511.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2021121511" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar05s06s05.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="references.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="section" id="d5e1399"><div class="titlepage"><div><div><h3 class="title">Feature request for <span class="productname">XProc</span>: please add <code class="sgmltag-element">&lt;p:validate-with-dtd&gt;</code></h3></div></div></div><p><span class="productname">XProc 3.0</span> offers a whole range of possibilities for validating documents using:
			</p><div xmlns:svg="http://www.w3.org/2000/svg" class="itemizedlist"><ul class="itemizedlist compact" style=""><li class="listitem"><p><code class="sgmltag-element">&lt;p:validate-with-json-schema&gt;</code></p></li><li class="listitem"><p><code class="sgmltag-element">&lt;p:validate-with-nvdl&gt;</code></p></li><li class="listitem"><p><code class="sgmltag-element">&lt;p:validate-with-relax-ng&gt;</code></p></li><li class="listitem"><p><code class="sgmltag-element">&lt;p:validate-with-schematron&gt;</code></p></li><li class="listitem"><p><code class="sgmltag-element">&lt;p:validate-with-xml-schema&gt;</code></p></li></ul></div><p>
			However, there is no equivalent for validating <acronym class="acronym">XML</acronym> documents with <acronym class="acronym">DTD</acronym>.
		</p><p>Even though <span class="productname">XML Schema</span> became a <span class="orgname">W3C</span> recommendation already in 2001, and <span class="productname">RELAX NG</span> was also defined then, there are still legacy systems that only support <acronym class="acronym">DTD</acronym>. In rare cases, it is possible to enhance these systems by switching to <span class="productname">XML Schema</span>, but this is generally not an option and these systems have to be supported nevertheless.</p><p>The lack of <acronym class="acronym">DTD</acronym> validation in <span class="productname">XProc 3.0</span> means that the pipelines have to use a workaround. The <acronym class="acronym">XML</acronym> result must first be stored to the file system  and then loaded immediately from there again using <code class="sgmltag-element">&lt;p:load&gt;</code>. This is because, surprisingly, <acronym class="acronym">DTD</acronym> validation is possible with <span class="productname">XProc 3.0</span> but only while loading a document. Finally, the previously stored and validated XML result has to be deleted, because its no longer needed. While this workaround does its job, the ability to do this in memory using something like <code class="sgmltag-element">&lt;p:validate-with-dtd&gt;</code> would be much more effective.</p><p>There is perhaps an argument for adding <acronym class="acronym">DTD</acronym> validation to the pipeline using <code class="sgmltag-element">&lt;p:declare-step&gt;</code>. However, this requires the XProc processor to realise that only a memory stream is needed, causing it to perform an optimisation and avoid storing the result to the file system and reloading it. Even if this would work, anybody who wants to support DTD has to add the following step to their pipelines instead of just using <code class="sgmltag-element">&lt;p:validate-with-dtd&gt;</code>.</p><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;p:declare-step</strong> <span class="hl-attribute" style="color: #F5844C">type</span>=<span class="hl-value" style="color: #993300">"tcg:validate-with-dtd"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;p:input</strong> <span class="hl-attribute" style="color: #F5844C">port</span>=<span class="hl-value" style="color: #993300">"source"</span> <span class="hl-attribute" style="color: #F5844C">sequence</span>=<span class="hl-value" style="color: #993300">"false"</span> <span class="hl-attribute" style="color: #F5844C">content-types</span>=<span class="hl-value" style="color: #993300">"xml"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;p:output</strong> <span class="hl-attribute" style="color: #F5844C">port</span>=<span class="hl-value" style="color: #993300">"result"</span> <span class="hl-attribute" style="color: #F5844C">sequence</span>=<span class="hl-value" style="color: #993300">"true"</span> <span class="hl-attribute" style="color: #F5844C">content-types</span>=<span class="hl-value" style="color: #993300">"xml"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>

    <strong class="hl-tag" style="color: #000096">&lt;p:pipe</strong> <span class="hl-attribute" style="color: #F5844C">step</span>=<span class="hl-value" style="color: #993300">"load"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>

    <strong class="hl-tag" style="color: #000096">&lt;p:store</strong> <span class="hl-attribute" style="color: #F5844C">href</span>=<span class="hl-value" style="color: #993300">"foo.xml"</span> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"store"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>

    <strong class="hl-tag" style="color: #000096">&lt;p:load</strong> <span class="hl-attribute" style="color: #F5844C">href</span>=<span class="hl-value" style="color: #993300">"foo.xml"</span> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"load"</span> <span class="hl-attribute" style="color: #F5844C">parameters</span>=<span class="hl-value" style="color: #993300">"map{'dtd-validate' : true()}"</span> <span class="hl-attribute" style="color: #F5844C">depends-on</span>=<span class="hl-value" style="color: #993300">"store"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong>

    <strong class="hl-tag" style="color: #000096">&lt;p:file-delete</strong> <span class="hl-attribute" style="color: #F5844C">href</span>=<span class="hl-value" style="color: #993300">"foo.xml"</span> <span class="hl-attribute" style="color: #F5844C">depends-on</span>=<span class="hl-value" style="color: #993300">"load"</span><strong class="hl-tag" style="color: #000096"> /&gt;</strong> 
<strong class="hl-tag" style="color: #000096">&lt;/p:declare-step&gt;</strong></pre><p>So please, <span class="productname">XProc</span> working group, support DTD validation natively and add <code class="sgmltag-element">&lt;p:validate-with-dtd&gt;</code>  and Bob's your uncle.</p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar05s06s05.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar05s06.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="references.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>
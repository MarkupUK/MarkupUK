
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Off-the-shelf tools and ad-hoc tools</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2023 Proceedings" /><link rel="up" href="ar14.html" title="Tool-Based Transformations" /><link rel="prev" href="ways-to-explore.html" title="Exploring Data" /><link rel="next" href="ar14s05.html" title="Analyzing Existing Code" /><!--  Generated with Oxygen version 24.0, build number 2021121511.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.5.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2021121511" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ways-to-explore.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar14s05.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="section" id="off-the-shelf-or-ad-hoc"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Off-the-shelf tools and ad-hoc tools</h2></div></div></div><p>After sending some time figuring out which schemas or DTDs to use
(and it is usually not worth worrying too much about getting them all right
at first: the client might not have supplied all of the right files or they might do database imports without validation), it’s time to look inside, 
to look at the data.</p><p>A helpful initial question is, <span class="quote">“<span class="quote">what elements are used, and how often?</span>”</span> We could answer this for example in XPath or XQuery:</p><pre class="programlisting" xml:space="preserve">distinct-values(//name())</pre><p>You might need to use something like db:open('data')//name(), 
  depending on your XQuery or XPath processor.</p><p>The resulting list is unsorted, and doesn’t tell us how often
  each element name occurred.</p><pre class="programlisting" xml:space="preserve">//name() =&gt; distinct-values() =&gt; sort() =&gt; string-join('&amp;#x10;')</pre><p>might give us a sorted list. We would like the numbers, too:</p><pre class="programlisting" xml:space="preserve">for $n in (//name() =&gt; distinct-values() =&gt; sort())
return $n || ' ' || count(//*[name() eq $n])</pre><p>This gives ugly output like this:</p><pre class="programlisting" xml:space="preserve">0
a 775223
body 9669
br 9608
circle 8718
div 265564
font 19208
form 19232
  . . .</pre><p>The empty name with a zero is from something without a name: the document node. We can use //*/name() instead and it will go away.</p><p>The output is still ugly. We could use some formatting,
  or maybe generate HTML. And after that, we might want the same for
  attributes. Then maybe we want to know about attribute values. With
  thousands of sample documents, though, there are a lot of values perhaps for
  ID and for dates that we might want to ignore.</p><p>You can see where this is going. Put all this into a script and
  comment it, give it some options or stylesheet parameters, and you
  can also run it on the output you generate and account for the numbers. Figure <a class="xref" href="off-the-shelf-or-ad-hoc.html#fig-freqx1" title="Figure 1. FreqX Report for Element Counts" shape="rect">Figure 1, “FreqX Report for Element Counts”</a> shows what a simple HTML report might look like:</p><div class="figure" id="fig-freqx1"><p class="title"><strong>Figure 1. FreqX Report for Element Counts</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td rowspan="1" colspan="1"><img src="papers-2023/quin/images/freqx1.png" width="100%" alt="FreqX Report for Element Counts" /></td></tr></table></div></div></div><br class="figure-break" clear="none" /><p>At this point, an ad-hoc query has turned into a tool. Attributes were added, as per <a class="xref" href="off-the-shelf-or-ad-hoc.html#fig-freqx2" title="Figure 2. FreqX Report for Attributes" shape="rect">Figure 2, “FreqX Report for Attributes”</a>, which shows the start of the bar chart for elements sorted by frequency,
  once a user has clicked on, and expanded, the entry for xref. Figure <a class="xref" href="off-the-shelf-or-ad-hoc.html#fig-freqx3" title="Figure 3. FreqX Report for Attribute Values" shape="rect">Figure 3, “FreqX Report for Attribute Values”</a> shows the attribute value table, where the user has expanded orientation to get more information.</p><p>The FreqX tool is freely available from gitlab; development was funded by Mulberry Technologies.
    However, it’s simple enough that developing a tool to meet your own needs might be easy,
  as might editing the FreqX source code. If you make changes or fix bugs, please do file issues or
  patches, so that everyone else can benefit. For example, an often-requested feature is being able
  to go from an attribute value to a list of documents in which it appears; this might be best
  accomplished using the eXist-db or BaseX RestXQ feature.</p><div class="figure" id="fig-freqx2"><p class="title"><strong>Figure 2. FreqX Report for Attributes</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td rowspan="1" colspan="1"><img src="papers-2023/quin/images/freqx2.png" width="100%" alt="FreqX Report for Attributes" /></td></tr></table></div></div></div><br class="figure-break" clear="none" /><div class="figure" id="fig-freqx3"><p class="title"><strong>Figure 3. FreqX Report for Attribute Values</strong></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="80%"><tr><td rowspan="1" colspan="1"><img src="papers-2023/quin/images/freqx3.png" width="100%" alt="FreqX Report for Attribute Values" /></td></tr></table></div></div></div><br class="figure-break" clear="none" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ways-to-explore.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar14.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar14s05.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>

<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SQF User Input Dialog</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2019 Proceedings" /><link rel="up" href="ar09s03.html" title="Use Cases" /><link rel="prev" href="ar09s03s05.html" title="Ignore Schematron Checks" /><link rel="next" href="ar09s04.html" title="Abstract Quick Fixes" /><!--  Generated with Oxygen version 21.0, build number 2019032613.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.1.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2019032613" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar09s03s05.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar09s04.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="section" id="d5e4286"><div class="titlepage"><div><div><h3 class="title">SQF User Input Dialog</h3></div></div></div><p>Sometimes, when executing a quick fix action, you need to interact with the user
                and get input from them, or make them choose between different options. The quick
                fix specification defines the <span class="emphasis"><em>sqf:user-entry</em></span> for such
                interactions. The <code class="code">sqf:user-entry</code> element defines a value that must be
                set manually by the user. </p><p>If you need multiple values to be specified by the user, you can define multiple
                    <code class="code">user-entry</code> elements. For each <span class="emphasis"><em>user-entry</em></span>, a
                dialog box will be displayed where the user can specify values. The
                    <code class="code">user-entry</code> element can be used as an XPath variable where the XPath
                variable is the name of the <code class="code">user-entry</code>. </p><p>In the following example, the quick fix action defines two user entries, one that
                will allow the user to specify the value of the hypertext link, and one the will
                allow them to specify the link title. When the quick fix will be executed, two
                dialog boxes will be displayed, one for the link value and a second one for the link
                title. The order of the dialog boxes is define by the order of the defined user
                entries in the quick fix.</p><div class="example" id="d5e4297"><p class="title"><strong>Example 11. Quick fix action that presents two user entry dialogs</strong></p><div class="example-contents"><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;sqf:fix</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"addAnchorAndTitle"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;sqf:description&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;sqf:title&gt;</strong>Surround image with a hypertext link<strong class="hl-tag" style="color: #000096">&lt;/sqf:title&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/sqf:description&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;sqf:user-entry</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"href"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;sqf:description&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;sqf:title&gt;</strong>Enter anchor href value:<strong class="hl-tag" style="color: #000096">&lt;/sqf:title&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;/sqf:description&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/sqf:user-entry&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;sqf:user-entry</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"linkTitle"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;sqf:description&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;sqf:title&gt;</strong>Enter link title:<strong class="hl-tag" style="color: #000096">&lt;/sqf:title&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;/sqf:description&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/sqf:user-entry&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;sqf:replace&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;a</strong> <span class="hl-attribute" style="color: #F5844C">href</span>=<span class="hl-value" style="color: #993300">"{$href}"</span> <span class="hl-attribute" style="color: #F5844C">title</span>=<span class="hl-value" style="color: #993300">"{$linkTitle}"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
      <strong class="hl-tag" style="color: #000096">&lt;xsl:copy-of</strong> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"."</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;/a&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/sqf:replace&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/sqf:fix&gt;</strong></pre></div></div><br class="example-break" clear="none" /><p>In a quick fix, you can also use you own extensions using programming languages
                such as Java. This will allow you to present your own custom dialog boxes to get
                input from the user or make complex processing that is not possible with the current
                Schematron or XSLT support.</p><p>For example, you can invoke the <span class="emphasis"><em>JFileChooser</em></span> dialog box to
                allow the user to choose a file from the file system, and then use the file path in
                the document. To do this, you need to create a quick fix action that will call an
                XSL template that will present the dialog box and obtain the selected value from the
                user.</p><div class="example" id="d5e4303"><p class="title"><strong>Example 12. Quick fix that displays a browse dialog</strong></p><div class="example-contents"><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;sqf:fix</strong> <span class="hl-attribute" style="color: #F5844C">id</span>=<span class="hl-value" style="color: #993300">"addSrc"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;sqf:description&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;sqf:title&gt;</strong>Browse and add @src attribute<strong class="hl-tag" style="color: #000096">&lt;/sqf:title&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/sqf:description&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;sqf:add</strong> <span class="hl-attribute" style="color: #F5844C">node-type</span>=<span class="hl-value" style="color: #993300">"attribute"</span> <span class="hl-attribute" style="color: #F5844C">target</span>=<span class="hl-value" style="color: #993300">"src"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;xsl:call-template</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"browse"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/sqf:add&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/sqf:fix&gt;</strong></pre></div></div><br class="example-break" clear="none" /><p>To display the dialog box from XSLT, you need to create a new instance using a
                    <span class="emphasis"><em>new()</em></span> call, and then use the
                    <span class="emphasis"><em>showOpenDialog()</em></span> to show a dialog box that will allow the
                user to choose a file. Depending on whether the user decides to cancel the dialog
                box or choose a file, you can obtain the current selected file using the
                    <span class="emphasis"><em>getSelectedFile()</em></span> call. The result of the template will be
                sent to the quick fix action that will inset it in the document.</p><div class="example" id="d5e4310"><p class="title"><strong>Example 13. Quick fix that displays a browse dialog</strong></p><div class="example-contents"><pre class="programlisting" xml:space="preserve"><strong class="hl-tag" style="color: #000096">&lt;xsl:template</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"browse"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;xsl:variable</strong> <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"dialog"</span> <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"jBrowse:new()"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;xsl:variable</strong> 
    <span class="hl-attribute" style="color: #F5844C">name</span>=<span class="hl-value" style="color: #993300">"result"</span> 
    <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"jBrowse:showOpenDialog($dialog, $dialog)"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;xsl:if</strong> <span class="hl-attribute" style="color: #F5844C">test</span>=<span class="hl-value" style="color: #993300">"$result = 0"</span><strong class="hl-tag" style="color: #000096">&gt;</strong>
    <strong class="hl-tag" style="color: #000096">&lt;xsl:value-of</strong>
     <span class="hl-attribute" style="color: #F5844C">select</span>=<span class="hl-value" style="color: #993300">"jBrowse:getSelectedFile($dialog)"</span><strong class="hl-tag" style="color: #000096">/&gt;</strong>
  <strong class="hl-tag" style="color: #000096">&lt;/xsl:if&gt;</strong>
<strong class="hl-tag" style="color: #000096">&lt;/xsl:template&gt;</strong></pre></div></div><br class="example-break" clear="none" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar09s03s05.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar09s03.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar09s04.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>
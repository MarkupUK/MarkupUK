
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xhtml="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Development and tests</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><link rel="home" href="oxygen-main.html" title="Markup UK 2019 Proceedings" /><link rel="up" href="ar05.html" title="XQuery for Data Workers" /><link rel="prev" href="ar05s04.html" title="Fleur: an XQuery implementation in Javascript" /><link rel="next" href="ar05s06.html" title="Extensions" /><!--  Generated with Oxygen version 21.0, build number 2019032613.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><script type="text/javascript" xml:space="preserve"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-3.1.1.min.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js" xml:space="preserve"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js" xml:space="preserve"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js?buildId=2019032613" xml:space="preserve"><!----></script></head><body onload="highlightSearchTerm()" class="frmBody"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="3" rowspan="1"><form name="searchForm" id="searchForm" action="javascript:void(0)" onsubmit="parent.tocwin.SearchToc(this);" method="get" enctype="application/x-www-form-urlencoded"><!----><input type="text" id="textToSearch" name="textToSearch" class="textToSearch" size="30" placeholder="Search" /><!----></form></td></tr><tr><td width="20%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar05s04.html" shape="rect">Prev</a></span> </td><th width="60%" align="center" rowspan="1" colspan="1"> </th><td width="20%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar05s06.html" shape="rect">Next</a></span></td></tr></table><hr /></div><div class="section" id="d5e2583"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Development and tests</h2></div></div></div><p>As XSLTForms, Fleur is developed using Eclipse Orion which provides
    automatic sources checking while typing. It prevents from syntax errors,
    undeclared variables, unreached statements, unbalanced parentheses or
    curly braces. It is an important feature because Javascript is an
    interpreted programming language.</p><div class="figure" id="d5e2586"><p class="title"><strong>Figure 1. Eclipse Orion</strong></p><div class="figure-contents"><div class="mediaobject"><img src="papers-2019/alain/AlainCouthures-Orion.png" width="590" alt="Eclipse Orion" /></div></div></div><br class="figure-break" clear="none" /><p>There is a source file for each feature. The HTTP server is used to
    collect and concat single files using virtual URLs.</p><p>XPath functions are written in vanilla Javascript instructions. This
    is allowed by a convert mechanism for atomic values and sequences as
    parameters or returned value.</p><pre class="programlisting" xml:space="preserve">Fleur.XPathFunctions_prof["sleep#1"] = 
    new Fleur.Function("http://basex.org/modules/proc", "prof:sleep",
 function(ms, callback) {
  if (ms &gt; 0) {
   setTimeout(function() {
    callback(null);
   }, ms);
   return;
  }
  callback(null);
 },
 null, [{type: Fleur.Type_integer}], false, true, {type: Fleur.EmptySequence});</pre><p>Tests are mainly performed with a browser. Thanks to virtual URLs,
    the file fleur.js is automatically refreshed from last edited source
    files. XForms, with XSLTForms, is used to run the official XQuery Test
    Suite, category per category then to allow unit test for debugging. Even
    if XSLTForms is not yet using Fleur for itself, because of events support
    in XForms, it can evaluate XQuery expressions asynchronously: in the same
    category page, tests are evaluated in parallel and the corresponding
    results are provided depending on the evaluation time.</p><div class="figure" id="d5e2595"><p class="title"><strong>Figure 2. XQuery Test Suite</strong></p><div class="figure-contents"><div class="mediaobject"><img src="papers-2019/alain/AlainCouthures-TestSuite.png" width="846" alt="XQuery Test Suite" /></div></div></div><br class="figure-break" clear="none" /><p>Serialization for tests is specific: resulting values are serialized
    as an equivalent XQuery expression instead of just as string values. It
    guarantees no ambiguity about sequences, types and allows to check node
    types.</p><div class="figure" id="d5e2601"><p class="title"><strong>Figure 3. Fleur Sandbox</strong></p><div class="figure-contents"><div class="mediaobject"><img src="papers-2019/alain/AlainCouthures-RunTest.png" width="408" alt="Fleur Sandbox" /></div></div></div><br class="figure-break" clear="none" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left" rowspan="1" colspan="1"><span class="navprev"><a accesskey="p" href="ar05s04.html" shape="rect">Prev</a></span> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="u" href="ar05.html" shape="rect">Up</a></td><td width="40%" align="right" rowspan="1" colspan="1"> <span class="navnext"><a accesskey="n" href="ar05s06.html" shape="rect">Next</a></span></td></tr><tr><td width="40%" align="left" valign="top" rowspan="1" colspan="1"> </td><td width="20%" align="center" rowspan="1" colspan="1"><a accesskey="h" href="oxygen-main.html" shape="rect">Home</a></td><td width="40%" align="right" valign="top" rowspan="1" colspan="1"> </td></tr></table></div><div class="footer">Generated by<a class="oxyFooter" href="http://www.oxygenxml.com/xml_webhelp.html" target="_blank" shape="rect">                            
                            &lt;oXygen/&gt; XML WebHelp
                        </a></div></body></html>